<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload</title>
</head>
<body>
<h1>الحمدلله</h1>
  <input type="file" accept="image/*">
  <img src="" alt="" width="200">
  <script>
    let url ="https://script.google.com/macros/s/AKfycbxoM0OS6LoXSlKcvfm6t7rVGzVu5qy6u-kxaRgPKluIAq4u9tHAgNSroaJzmJyNwJLG/exec";
    let file = document.querySelector("input");
    let img = document.querySelector("img");

    file.addEventListener('change',()=>{
        let fr = new FileReader();
        fr.addEventListener('loadend',()=>{
            let res = fr.result;
            img.src = res;
            let spt = res.split("base64,")[1];
            console.log(spt);
            let obj = {
                base64: spt,
                type: file.files[0].type,
                name: file.files[0].name
            }
            fetch(url,{
                method: "POST",
                headers: {
                    "Content-Type":"application/json"
                },
                body: JSON.stringify(obj)
            })
            .then(r=>r.text())
            .then(data=>console.log(data))
            .catch(err=>console.error(err));
        })
        fr.readAsDataURL(file.files[0])
    })
  </script>
</body>
</html>